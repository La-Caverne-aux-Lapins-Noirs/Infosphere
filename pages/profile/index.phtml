<?php
$user = $User;
/*
** Il faut faire un systeme de calcul d'"implication", basé sur les logs,
** la partition et les rendus, qui soit lissé dans le temps pour former une tendance
** Il faut faire un systeme de calcul de réussite, basé sur les médailles nouvellement
** acquises, le grade moyen et le nombre de flammes, pareil, lissé dans le temps
*/
?>

<style>
 table, td
 {
     border: 1px black solid;
 }
</style>

<table class="full_size_table">
    <tr><td>
	<table class="full_size_table"><tr><td style="width: 300px; vertical-align: top;">
	    <p style="text-align: center;">
		<b style="font-size: xx-large;"><?php display_nickname($user, false); ?></b><br />
		<?php display_avatar($user); ?>
	    </p>
	    <table class="uservalues">
		<tr><td><b><?=$Dictionnary["CodeName"]; ?></b>:</td><td><?=$user["codename"]; ?></td></tr>
		<tr><td><b><?=$Dictionnary["FirstName"]; ?></b>:</td><td><?=$user["first_name"]; ?></td></tr>
		<tr><td><b><?=$Dictionnary["FamilyName"]; ?></b>:</td><td><?=$user["family_name"]; ?></td></tr>
		<tr><td><b><?=$Dictionnary["BirthDate"]; ?></b>:</td><td><?=$user["birth_date"] ? human_date($user["birth_date"], true) : ""; ?></td></tr>
		<tr><td><b><?=$Dictionnary["Phone"]; ?></b>:</td><td><?=$user["phone"]; ?></td></tr>
		<tr><td><b><?=$Dictionnary["Address"]; ?></b>:</td><td>
		    <input
			readonly
			disabled="disabled"
			style="width: 100%;"
			type="text"
			value="<?=$user["address_name"]; ?> <?=$user["street_name"]; ?> <?=$user["postal_code"]; ?> <?=$user["city"]; ?> <?=$user["country"]; ?>"
		    />
		</td></tr>
		<tr><td><b><?=$Dictionnary["MemberSince"]; ?></b>:</td><td><?=human_date($user["registration_date"], true); ?></td></tr>
	    </table>
	</td><td>
	    <table class="full_size_table">
		<?php if (is_admin() || $user["id"] == $User["id"]) { ?>
		    <tr><td>
			Fichiers associés au compte (Mettre un browser ici)
		    </td></tr>
		<?php } ?>
		<tr><td>
		    Médailles personnelles
		</td></tr>
	    </table>
	</td></tr></table>
    </td><td>
	Score
    </td></tr><tr>
	<?php
	$_GET["w"] = 960;
	$_GET["h"] = 400;
	$_GET["e"] = now();
	$_GET["s"] = now() - 14 * 24 * 60 * 60;
	?>
	<td class="stats" style="height: 50%;">
	    <?php
	    $panel = [
		$Dictionnary["ActivityLogs"] => __DIR__."/activity_logs.phtml",
		$Dictionnary["Presence"] => __DIR__."/presence.phtml",
		$Dictionnary["MedalGain"] => __DIR__."/medals.phtml",
		$Dictionnary["DeliveryDone"] => __DIR__."/delivery.phtml",
	    ];
	    tabpanel($panel, $Position.$user["id"]."graphes", $Dictionnary["ActivityLogs"]);
	    ?>
	</td>
	<td>
	<?php
	$panel = [
	    $Dictionnary["AuthorizedFunctions"] => __DIR__."/authorized_functions.phtml",
	    $Dictionnary["ManagedActivities"] => __DIR__."/managed_activities.phtml",
	    $Dictionnary["Intercom"] => __DIR__."/intercom.phtml",
	];
	tabpanel($panel, $Position.$user["id"], $Dictionnary["Intercom"]);
	?>	
    </td></tr>
</table>

